<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.koreait.ohouse.CommunityMapper">
	<insert id="insBoard" useGeneratedKeys="true" keyProperty="i_board">
		INSERT INTO cm_board
		(i_user, typ, typ_seq, board_num, title, ctnt, board_img)
		SELECT #{i_user}, #{typ}, #{typ_seq}, IFNULL(MAX(#{board_num}), 0) + 1, #{title}, #{ctnt}, #{board_img}
		FROM cm_board
		WHERE typ = #{typ} AND typ_seq = #{typ_seq};
	</insert>	
	
	<update id="updBoard">
		UPDATE cm_board
		SET title = #{title}
		, ctnt = #{ctnt}
		WHERE i_board = #{i_board}
		AND i_user = #{i_user}
	</update>
	
	<delete id="delBoard">
		DELETE FROM cm_board
		WHERE i_board = #{i_board}
		AND i_user = #{i_user}
	</delete>
</mapper>